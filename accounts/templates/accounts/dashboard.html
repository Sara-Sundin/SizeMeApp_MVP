{% extends "base.html" %}
{% load static %}

{% block content %}
           
    <!-- Starter Plan Section -->
<section id="dashboard" class="text-center">

     <!-- Dashboard Heading -->
     <div class="mb-5 text-center">
        <h1>Welcome to your account, {{ user.get_short_name }}!</h1>
    </div>

      <!-- Profile Section -->
    <div id="profile" class="container p-4">
      <div class="row align-items-center mb-5">
        
        <!-- Profile Picture + Info -->
        <div class="col-12 col-md-6 d-flex align-items-center mb-4 mb-md-0">
          <!-- Profile Picture -->
          <div class="me-3">
            <div class="profile-picture-placeholder rounded-circle bg-secondary" style="width: 120px; height: 120px;"></div>
          </div>
          <!-- User Info -->
          <div class="text-start">
            <div class="mb-2">
              <strong>Name:</strong> {{ user.full_name }}
            </div>
            <div>
              <strong>Email:</strong> {{ user.email }}
            </div>
          </div>
        </div>

        <!-- Update Button -->
        <div class="col-12 col-md-6 text-center">
          <a href="#" class="cta-btn cta-btn--primary" data-bs-toggle="modal" data-bs-target="#profileModal">
            Update your profile
          </a>          
        </div>
      </div>

      <!-- Instructions (Two Columns) -->
      <div class="row g-3">
        <div class="col-12 col-md-6 d-grid px-4">
          <h3>1. Your Measurements</h3>
          <p>Add your measurements before entering the application.
            <br>
            <br>
            Come back here to update your measurements.</p>
            <a href="#" class="cta-btn cta-btn--tertiary" data-bs-toggle="modal" data-bs-target="#measurementModal">
              Update Measurements
            </a>            
        </div>
        <div class="col-12 col-md-6 d-grid px-4">
          <h3>2. Start Browsing</h3>
          <p>Your will be redirected to our prototype webshop to try out the app.
            <br>
            <br>
            Done with sizing? Just hit the exit button in the webshop.</p>
          <a href="#" class="cta-btn cta-btn--secondary">Enter the application</a>
        </div>
      </div>
    </div>  
</section>

{% if show_modal %}
<script>
  window.onload = function () {
    const modal = new bootstrap.Modal(document.getElementById('measurementModal'));
    modal.show();
  }
</script>
{% endif %}

{% include "accounts/update_profile_modal.html" %}

<!-- Modal Measurements -->
<div class="modal fade" id="measurementModal" tabindex="-1" aria-labelledby="measurementsLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="post" action="{% url 'update_measurements' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="measurementsLabel">Enter Your Measurements</h5>
        </div>
        <div class="modal-body">
          
          <div class="form-group mb-3">
            <label for="chest">Chest (cm)</label>
            <input type="number" name="chest" id="chest" class="form-control" required
                   value="{{ user.chest|default_if_none:'' }}">
          </div>

          <div class="form-group mb-3">
            <label for="waist">Waist (cm)</label>
            <input type="number" name="waist" id="waist" class="form-control" required
                   value="{{ user.waist|default_if_none:'' }}">
          </div>

          <div class="form-group mb-3">
            <label for="hips">Hips (cm)</label>
            <input type="number" name="hips" id="hips" class="form-control" required
                   value="{{ user.hips|default_if_none:'' }}">
          </div>

          <div class="form-group mb-3">
            <label for="shoulders">Shoulders (cm)</label>
            <input type="number" name="shoulders" id="shoulders" class="form-control" required
                   value="{{ user.shoulders|default_if_none:'' }}">
          </div>

        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save Measurements</button>
        </div>
      </form>
    </div>
  </div>
</div>


{% endblock %}